<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.airjnc.reservation.dao.ReservationMapper">
  <select id="findById" resultType="ReservationEntity">
    select *
    from room_reservation
    where id = #{id}
  </select>
  <update id="cancel">
    UPDATE room_reservation
    SET deleted_at = now()
    WHERE id = #{id}
  </update>

  <update id="cancelDate">
    UPDATE room_reservation_date
    SET is_canceled = TRUE
    WHERE room_reservation_id = #{id}
  </update>
  <select id="findAllByUserId" resultType="com.airjnc.reservation.dto.response.Reservation">
    select *
    from room_reservation
    where user_id = #{userId}
    LIMIT #{skip}, #{offset}
  </select>
  <select id="count" resultType="int">
    select count(*)
    from room_reservation
    where user_id = #{userId}
  </select>
</mapper>
